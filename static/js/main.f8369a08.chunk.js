(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,,function(e,t,n){"use strict";function i(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),i(n(44)),i(n(112)),i(n(113)),i(n(114)),i(n(115))},,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.START_ROUND_ACTION="START_ROUND",t.RELEASE_PACMAN_ACTION="ReleasePacman",t.RELEASE_GHOST_ACTION="ReleaseGhost",t.BRING_GHOST_OUT_ACTION="BringHostOut",t.ANIMATION_STEP_ACTION="ANIMATION_STEP",t.CHANGE_DIRECTION_ACTION="CHANGE_DIR",t.PAUSE_COMMAND_ACTION="PAUSE",t.START_APPLICATION_ACTION="StartApp",t.MODAL_TEXT_ACTION="ModalText",t.DOT_EATEN_ACTION="DotEaten",t.PELLET_EATEN_ACTION="PelletEaten",t.GHOST_BITTEN_ACTION="GhostBitten",t.GHOST_LEFT_BOX_ACTION="GhostLeftBox",t.HEAT_END_ACTION="HeatEnd",t.FREEZE_ACTORS_ACTION="FreezeActors",t.HIDE_ACTORS_ACTION="HideActors",t.KILL_PACMAN_ACTION="KillPacman",t.RESET_HEAT_ACTION="ResetHeat",t.RESET_ROUND_ACTION="ResetRound",t.SHOW_LEVEL_ACTION="ShowLevel",t.INCREASE_LEVEL_ACTION="IncreaseLevel",t.BOUNCE_GHOST_ACTION="BounceGhost",t.START_BLUE_MODE_ACTION="StartBlueMode",t.END_BLUE_MODE_ACTION="EndBlueMode",t.BLUE_MODE_TIMEOVER_ACTION="BlueModeTimeOver",t.animatedStepAction=function(e,n){return{type:t.ANIMATION_STEP_ACTION,timestamp:e,period:n}},t.changeDirectionAction=function(e){return{type:t.CHANGE_DIRECTION_ACTION,direction:e}},t.pauseCommandAction=function(){return{type:t.PAUSE_COMMAND_ACTION}},t.startApplicationAction=function(){return{type:t.START_APPLICATION_ACTION}},t.releasePacmanAction=function(){return{type:t.RELEASE_PACMAN_ACTION}},t.releaseGhostAction=function(e){return{type:t.RELEASE_GHOST_ACTION,index:e}},t.bringGhostOutAction=function(e){return{type:t.BRING_GHOST_OUT_ACTION,index:e}},t.bounceGhostAction=function(e){return{type:t.BOUNCE_GHOST_ACTION,index:e}},t.modalTextAction=function(e){return{type:t.MODAL_TEXT_ACTION,text:e}},t.dotEatenAction=function(e){return{type:t.DOT_EATEN_ACTION,index:e}},t.pelletEatenAction=function(e){return{type:t.PELLET_EATEN_ACTION,index:e}},t.ghostBittenAction=function(e,n){return{type:t.GHOST_BITTEN_ACTION,pacmanPosition:e,ghostIndex:n}},t.ghostLeftBoxAction=function(e){return{type:t.GHOST_LEFT_BOX_ACTION,ghostIndex:e}},t.heatEndAction=function(e){return{type:t.HEAT_END_ACTION,lost:e}},t.freezeActorsAction=function(){return{type:t.FREEZE_ACTORS_ACTION}},t.hideActorsAction=function(){return{type:t.HIDE_ACTORS_ACTION}},t.killPacmanAction=function(){return{type:t.KILL_PACMAN_ACTION}},t.resetHeatAction=function(){return{type:t.RESET_HEAT_ACTION}},t.resetRoundAction=function(){return{type:t.RESET_ROUND_ACTION}},t.showLevelAction=function(){return{type:t.SHOW_LEVEL_ACTION}},t.increaseLevelAction=function(){return{type:t.INCREASE_LEVEL_ACTION}},t.startBlueModeAction=function(){return{type:t.START_BLUE_MODE_ACTION}},t.endBlueModeAction=function(){return{type:t.END_BLUE_MODE_ACTION}},t.blueModeTimeOverAction=function(){return{type:t.BLUE_MODE_TIMEOVER_ACTION}}},,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(116),o=n(10),r=n(117);!function(e){let t,n;!function(e){e.running="running",e.bouncing="bouncing",e.hidden="hidden",e.frozen="frozen",e.leavingBox="spawning",e.scared="scared"}(t=e.GhostState||(e.GhostState={})),function(e){e[e.n=0]="n",e[e.nw=1]="nw",e[e.w=2]="w",e[e.ne=3]="ne",e[e.sw=4]="sw",e[e.se=5]="se",e[e.N=6]="N",e[e.S=7]="S",e[e.NW=8]="NW",e[e.NW2=9]="NW2",e[e.W=10]="W",e[e.E=11]="E",e[e.NE=12]="NE",e[e.NE2=13]="NE2",e[e.SW=14]="SW",e[e.SW2=15]="SW2",e[e.SE=16]="SE",e[e.SE2=17]="SE2",e[e.Ne=18]="Ne",e[e.Nw=19]="Nw",e[e.Ws=20]="Ws",e[e.Wn=21]="Wn",e[e.Es=22]="Es",e[e.En=23]="En"}(n=e.WallType||(e.WallType={})),e.defaultApp=function(){const e=i.parseMazeSchema(r.mazeSchema1);return{game:{maze:{cellSize:new o.Point(28,28),passes:e.passes,walls:e.walls,gridSize:e.gridSize,textPos:e.textCenter,gate:e.gate},paused:!1,score:0,lives:3,level:1,modalText:void 0},round:{dots:e.dots.sort(o.Point.YXComparator).map(e=>({position:e,collected:!1})),pellets:e.pellets.sort(o.Point.YXComparator).map(e=>({position:e,collected:!1}))},heat:{pacman:{chomping:!1,running:!1,dying:!1,hidden:!1,mouthAngle:90,direction:o.Direction.Left,nextDirection:o.Direction.None,position:e.pacmanInitPos,speed:8},ghosts:[0,1,2,3].map(n=>({state:t.frozen,running:!1,hidden:!1,direction:o.Direction.None,speed:8,position:e.ghostInitPos[n]}))}}}}(t.Store||(t.Store={}))},,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(7),o=n(7),r=n(10),s=n(16),a=n(17);t.default=class extends i.Component{line(e,t,n,i){return`M ${e} ${t} L${n} ${i}`}curve(e,t,n,i,o,s){function a(e,t,n){return e.offset(t.offset(e.negate).scale(n))}const c=new r.Point(e,t),l=new r.Point(n,i),u=new r.Point(o,s);let d=a(l,c,.9),h=a(l,u,.9);var p=a(d,l,.5),y=a(l,h,.5);return`M${c.x} ${c.y} L${d.x} ${d.y} C${p.x} ${p.y} ${y.x} ${y.y} ${h.x} ${h.y} L${u.x} ${u.y}`}generatePath(){const e=this.props.bounds,t=e.x,n=e.y,i=t+e.dx,o=n+e.dy,r=e.center.y,s=e.center.x;switch(this.props.type){case a.Store.WallType.n:return this.line(t,r,i,r);case a.Store.WallType.w:return this.line(s,n,s,o);case a.Store.WallType.nw:return this.curve(s,o,s,r,i,r);case a.Store.WallType.ne:return this.curve(t,r,s,r,s,o);case a.Store.WallType.sw:return this.curve(s,n,s,r,i,r);case a.Store.WallType.se:return this.curve(t,r,s,r,s,n)}const c=t+.2*e.dx,l=t+.5*e.dx,u=t+.5*e.dx,d=t+.8*e.dx,h=n+.2*e.dy,p=n+.5*e.dy,y=n+.5*e.dy,f=n+.8*e.dy;switch(this.props.type){case a.Store.WallType.W:return this.line(c,n,c,o)+this.line(l,n,l,o);case a.Store.WallType.E:return this.line(u,n,u,o)+this.line(d,n,d,o);case a.Store.WallType.N:return this.line(t,h,i,h)+this.line(t,p,i,p);case a.Store.WallType.S:return this.line(t,y,i,y)+this.line(t,f,i,f);case a.Store.WallType.NW:return this.curve(c,o,c,h,i,h)+this.curve(l,o,l,p,i,p);case a.Store.WallType.NW2:return this.curve(u,o,u,y,i,y)+this.curve(d,o,d,f,i,f);case a.Store.WallType.NE:return this.curve(t,h,d,h,d,o)+this.curve(t,p,u,p,u,o);case a.Store.WallType.NE2:return this.curve(t,y,l,y,l,o)+this.curve(t,f,c,f,c,o);case a.Store.WallType.SW:return this.curve(c,n,c,f,i,f)+this.curve(l,n,l,y,i,y);case a.Store.WallType.SW2:return this.curve(u,n,u,p,i,p)+this.curve(d,n,d,h,i,h);case a.Store.WallType.SE:return this.curve(t,y,u,y,u,n)+this.curve(t,f,d,f,d,n);case a.Store.WallType.SE2:return this.curve(t,h,c,h,c,n)+this.curve(t,p,l,p,l,n);case a.Store.WallType.Ne:return this.line(t,h,i,h)+this.curve(t,p,s,p,s,o);case a.Store.WallType.Nw:return this.line(i,h,t,h)+this.curve(i,p,s,p,s,o);case a.Store.WallType.Ws:return this.line(c,n,c,o)+this.curve(l,n,l,r,i,r);case a.Store.WallType.Wn:return this.line(c,o,c,n)+this.curve(l,o,l,r,i,r);case a.Store.WallType.Es:return this.line(d,n,d,o)+this.curve(u,n,u,r,t,r);case a.Store.WallType.En:return this.line(d,o,d,n)+this.curve(u,o,u,r,t,r);default:return""}}render(){return o.createElement(s.Path,{data:this.generatePath(),stroke:"blue",strokeWidth:3})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(10);class o{constructor(e,t){this.x=e,this.y=t}static boundingRect(e){const t=e.reduce((e,t)=>(e.x0>t.x&&(e.x0=t.x),e.y0>t.y&&(e.y0=t.y),e.x1<t.x&&(e.x1=t.x),e.y1<t.y&&(e.y1=t.y),e),{x0:1e5,y0:1e5,x1:-1e5,y1:-1e5});return new i.Rectangle(t.x0,t.y0,t.x1-t.x0,t.y1-t.y0)}offset(e){return new o(this.x+e.x,this.y+e.y)}equals(e){return this.x===e.x&&this.y===e.y}scale(e){return"number"===typeof e?new o(this.x*e,this.y*e):new o(this.x*e.x,this.y*e.y)}manhattanDistanceTo(e){return Math.abs(e.x-this.x)+Math.abs(e.y-this.y)}euclidDistanceTo(e){var t=e.x-this.x,n=e.y-this.y;return Math.sqrt(t*t+n*n)}asRectangleSize(){return new i.Rectangle(0,0,this.x,this.y)}toRectangle(e){return new i.Rectangle(this.x,this.y,e.x,e.y)}toVector(){return new o(Math.sign(this.x),Math.sign(this.y))}static vector(e){switch(e){case i.Direction.Right:return new o(1,0);case i.Direction.Left:return new o(-1,0);case i.Direction.Up:return new o(0,-1);case i.Direction.Down:return new o(0,1);default:return new o(0,0)}}get negate(){return new o(-this.x,-this.y)}round(e){function t(t){return Math.round(t*e)/e}return new o(t(this.x),t(this.y))}}o.YXComparator=((e,t)=>1e3*(e.y-t.y)+(e.x-t.x)),t.Point=o},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(10);t.createCollisionDetector=(()=>new r);const o=(e,t,n)=>{for(var i=0,o=e.length;i<o;){var r=Math.floor((i+o)/2),s=n(e[r].position,t);if(0===s)return r;s<0&&(i=r+1),0<s&&(o=r)}return-1};class r{checkBite(e,t){return e.euclidDistanceTo(t)<1.6}checkLoot(e,t){if(e.round(5).equals(e.round(1))){const n=o(t,e.round(1),i.Point.YXComparator);if(n>=0&&!t[n].collected)return n}return null}}},,,,,function(e,t,n){e.exports=n(52)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(7),o=n(54),r=n(57),s=n(127);n(128);const a=n(31),c=n(130),l=n(17),u=n(47),d=n(141),h=n(12),p=u.default();let y=window.devToolsExtension?window.devToolsExtension():e=>e;const f=a.applyMiddleware(p);const T=a.applyMiddleware(function(e){return function(e){return function(t){let n=!1,i=[];function o(){i.forEach(e=>E.dispatch(e)),i=[]}const r=Object.assign({},t,{asyncDispatch:function(e){i=i.concat(e),n&&o()}}),s=e(r);return n=!0,o(),s}}}),g=a.compose(T,f,y),E=a.createStore(c.rootReducer,l.Store.defaultApp(),g);p.run(d.rootSaga),o.render(i.createElement(h.Provider,{store:E},i.createElement(r.App,Object.assign({},l.Store.defaultApp()))),document.getElementById("root")),s.default()},,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(7),o=n(12);n(62);const r=n(64),s=n(124),a=n(14),c=n(10);t.App=o.connect((e,t)=>({paused:e.game.paused}),function(e){return{animatedStep:(t,n)=>e(a.animatedStepAction(t,n)),changeDirection:t=>e(a.changeDirectionAction(t)),pause:()=>e(a.pauseCommandAction()),start:()=>e(a.startApplicationAction())}})(class extends i.Component{constructor(){super(),this.stopTicker=(()=>{this.tickerStarted=!1}),this.startTicker=(()=>{this.tickerStarted=!0;let e=performance.now(),t=n=>{if(this.tickerStarted){if(!this.props.paused){let t=n-e;t<0&&(t=0),t>16&&(t=16),this.props.animatedStep(n,t)}e=n,window.requestAnimationFrame(t)}};window.requestAnimationFrame(t)})}addKeyboardListeners(){window.addEventListener("keydown",e=>this.keydown(e)),window.addEventListener("keyup",e=>this.keyup(e))}removeKeyboardListeners(){window.removeEventListener("keydown",this.keydown),window.removeEventListener("keyup",this.keyup)}componentDidMount(){this.startTicker(),this.addKeyboardListeners(),this.props.start()}componentWillUnmount(){this.stopTicker(),this.removeKeyboardListeners()}keydown(e){switch(e.key){case"ArrowRight":this.props.changeDirection(c.Direction.Right);break;case"ArrowLeft":this.props.changeDirection(c.Direction.Left);break;case"ArrowDown":this.props.changeDirection(c.Direction.Down);break;case"ArrowUp":this.props.changeDirection(c.Direction.Up);break;case" ":this.props.pause()}}keyup(e){e.key}render(){return i.createElement("div",{className:"App"},i.createElement("table",null,i.createElement("tr",null,i.createElement(r.Maze,null)),i.createElement("tr",null,i.createElement(s.Hud,null))))}})},,,,,function(e,t,n){},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(7),o=n(12),r=n(16),s=n(43),a=n(118),c=n(121),l=n(122),u=n(123);t.Maze=o.connect((e,t)=>({maze:e.game.maze}),e=>({load:()=>{}}))(class extends i.Component{render(){const e=this.props.maze,t=e.gridSize.scale(e.cellSize).asRectangleSize(),n=e.walls.map((t,n)=>({key:n,bounds:t.position.scale(e.cellSize).toRectangle(e.cellSize),type:t.type}));return i.createElement(r.Stage,{width:t.dx,height:t.dy},i.createElement(r.Layer,null,n.map(e=>i.createElement(s.default,Object.assign({key:e.key},e)))),i.createElement(r.Layer,null,i.createElement(a.Dots,null),i.createElement(a.Pellets,null)),i.createElement(r.Layer,null,[0,1,2,3].map(e=>i.createElement(l.Ghost,{key:e,index:e})),i.createElement(c.Pacman,null)),i.createElement(r.Layer,null,i.createElement(u.ModalText,null)))}})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(44);class o{constructor(e,t,n,o){this.p1=new i.Point(e,t),this.p2=new i.Point(e+n,t+o)}get x(){return this.p1.x}get y(){return this.p1.y}get dx(){return this.p2.x-this.p1.x}get dy(){return this.p2.y-this.p1.y}inflate(e){return"number"===typeof e?new o(this.x-e,this.y-e,this.dx+e+e,this.dy+e+e):new o(this.x-e.x,this.y-e.y,this.dx+e.x+e.x,this.dy+e.y+e.y)}moveBy(e){return new o(this.x+e.x,this.y+e.y,this.dx,this.dy)}get center(){return new i.Point(this.x+this.dx/2,this.y+this.dy/2)}}t.Rectangle=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(10);t.PathGenerator=class{static outlinePoints(e,t,n){let o=e=>1e3*e.y+e.x,r=new Map,s=new i.Point(0,0),a=1e5;e.forEach(e=>{const t=o(e);t<a&&(a=t,s=e),r.set(t,!0)});let c=s;var l=e=>r.get(o(c.offset(i.Point.vector(e))));let u=i.Direction.Right,d=[];do{d.push(c.scale(n).offset(t).offset(n.scale(.5))),l(i.rotateDirection(u,!1))?(u=i.rotateDirection(u,!1),c=c.offset(i.Point.vector(u))):l(u)?c=c.offset(i.Point.vector(u)):(u=i.rotateDirection(u,!0),c=c.offset(i.Point.vector(u)))}while(!c.equals(s));return d.reduce((e,t,n,i)=>e+this.renderPoint(n,i,.4),"")}static renderPoint(e,t,n){function i(e,t,n){return e.offset(t.offset(e.negate).scale(n))}const o=t[e],r=t[0===e?t.length-1:e-1],s=e===t.length-1?t[0]:t[e+1];let a="",c=i(o,r,n),l=i(o,s,n);var u=i(c,o,.5),d=i(o,l,.5);if(r.x===o.x&&o.x===s.x||r.y===o.y&&o.y===s.y?a+=`${0===e?"M":"L"}${o.x} ${o.y}`:a=`L${c.x} ${c.y} C${u.x} ${u.y} ${d.x} ${d.y} ${l.x} ${l.y}`,e===t.length-1){const e=i(s,o,n);a+=`L${e.x} ${e.y}`}return a}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.WallAggregator=class{static aggregate(e){var t=e.sort((e,t)=>e.x-t.x+(e.y-t.y));let n=e=>{let n=[],i=1e4;for(let o=0;o<t.length;){const r=t[o],s=r.manhattanDistanceTo(e);if(1===s)n.push(r),t.splice(o,1);else{if(s>i+40)break;o++}i=s}return n},i=(e,t)=>{for(let o of t)e.push(o),i(e,n(o))},o=[],r=t.shift();for(;void 0!==r;){let e=[];i(e,[r]),o.push(e),r=t.shift()}return o}}},function(e,t,n){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.None="none",e.Up="up",e.Left="left",e.Down="down",e.Right="right"}(i=t.Direction||(t.Direction={})),t.revertDirection=function(e){switch(e){case i.Down:return i.Up;case i.Up:return i.Down;case i.Left:return i.Right;case i.Right:return i.Left;default:return i.None}},t.rotateDirection=function(e,t){switch(e){case i.Down:return t?i.Left:i.Right;case i.Up:return t?i.Right:i.Left;case i.Left:return t?i.Up:i.Down;case i.Right:return t?i.Down:i.Up;default:return i.None}},t.allDirections=[i.Up,i.Left,i.Down,i.Right]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(17),o=n(10),r=" ",s="-",a="\xb7",c="g",l="\u25cf",u="P",d="1",h="2",p="3",y="4",f="T";t.parseMazeSchema=function(e){const t=new Map([["\u250c",i.Store.WallType.nw],["\u2510",i.Store.WallType.ne],["\u2500",i.Store.WallType.n],["\u2502",i.Store.WallType.w],["\u2514",i.Store.WallType.sw],["\u2518",i.Store.WallType.se],["\u2551",i.Store.WallType.W],["\u2550",i.Store.WallType.N],["\u2554",i.Store.WallType.NW],["\u2557",i.Store.WallType.NE],["\u255a",i.Store.WallType.SW],["\u255d",i.Store.WallType.SE],["\u2555",i.Store.WallType.Ne],["\u2552",i.Store.WallType.Nw],["\u2559",i.Store.WallType.Ws],["\u2553",i.Store.WallType.Wn],["\u255c",i.Store.WallType.Es],["\u2556",i.Store.WallType.En]]),n=new Array,T=new Array,g=new Array,E=new Array;let _=new o.Point(0,0),A=[],S=[],O=[];for(let v=0;v<e.length;v++){const m=e[v];for(let N=0;N<m.length;N++){let b=new o.Point(N,v);switch(m[N]){case l:n.push(b),g.push({gridPos:b,ghostOnly:!1});break;case a:T.push(b),g.push({gridPos:b,ghostOnly:!1});break;case u:E.push(b),g.push({gridPos:b,ghostOnly:!1});break;case c:0===_.x&&(_=b),g.push({gridPos:b,ghostOnly:!0});break;case r:g.push({gridPos:b,ghostOnly:!1});break;case f:g.push({gridPos:b,ghostOnly:!1}),O.push(b);break;case s:g.push({gridPos:b,ghostOnly:!0});break;case d:S[0]=b,g.push({gridPos:b,ghostOnly:!1});break;case h:S[1]=b,g.push({gridPos:b,ghostOnly:!0});break;case p:S[2]=b,g.push({gridPos:b,ghostOnly:!0});break;case y:S[3]=b,g.push({gridPos:b,ghostOnly:!0});break;default:{let n=t.get(m[N]);const o=(t,n)=>n>=0&&n<e.length&&t>=0&&t<e[0].length&&[a,r,l].indexOf(e[n][t])>=0;n===i.Store.WallType.N&&o(N,v-1)?n=i.Store.WallType.S:n===i.Store.WallType.W&&o(N-1,v)?n=i.Store.WallType.E:n===i.Store.WallType.NW&&o(N-1,v)?n=i.Store.WallType.NW2:n===i.Store.WallType.NE&&o(N+1,v)?n=i.Store.WallType.NE2:n===i.Store.WallType.SE&&o(N+1,v)?n=i.Store.WallType.SE2:n===i.Store.WallType.SW&&o(N-1,v)&&(n=i.Store.WallType.SW2),void 0!==n&&A.push({position:b,type:n})}}}}const m=E.reduce((e,t)=>e.offset(t),new o.Point(0,0)).scale(1/E.length),N=O.reduce((e,t)=>e.offset(t),new o.Point(0,0)).scale(1/O.length);return{pellets:n,dots:T,passes:g,walls:A,pacmanInitPos:m,ghostInitPos:S,gridSize:new o.Point(e[0].length,e.length),textCenter:N,gate:_}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mazeSchema1=["\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2555\u2552\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557","\u2551\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\u2502\u2502\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\u2551","\u2551\xb7\u250c\u2500\u2500\u2510\xb7\u250c\u2500\u2500\u2500\u2510\xb7\u2502\u2502\xb7\u250c\u2500\u2500\u2500\u2510\xb7\u250c\u2500\u2500\u2510\xb7\u2551","\u2551\u25cf\u2502\u2591\u2591\u2502\xb7\u2502\u2591\u2591\u2591\u2502\xb7\u2502\u2502\xb7\u2502\u2591\u2591\u2591\u2502\xb7\u2502\u2591\u2591\u2502\u25cf\u2551","\u2551\xb7\u2514\u2500\u2500\u2518\xb7\u2514\u2500\u2500\u2500\u2518\xb7\u2514\u2518\xb7\u2514\u2500\u2500\u2500\u2518\xb7\u2514\u2500\u2500\u2518\xb7\u2551","\u2551\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\u2551","\u2551\xb7\u250c\u2500\u2500\u2510\xb7\u250c\u2510\xb7\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2510\xb7\u250c\u2510\xb7\u250c\u2500\u2500\u2510\xb7\u2551","\u2551\xb7\u2514\u2500\u2500\u2518\xb7\u2502\u2502\xb7\u2514\u2500\u2500\u2510\u250c\u2500\u2500\u2518\xb7\u2502\u2502\xb7\u2514\u2500\u2500\u2518\xb7\u2551","\u2551\xb7\xb7\xb7\xb7\xb7\xb7\u2502\u2502\xb7\xb7\xb7\xb7\u2502\u2502\xb7\xb7\xb7\xb7\u2502\u2502\xb7\xb7\xb7\xb7\xb7\xb7\u2551","\u255a\u2550\u2550\u2550\u2550\u2557\xb7\u2502\u2514\u2500\u2500\u2510\xb7\u2502\u2502\xb7\u250c\u2500\u2500\u2518\u2502\xb7\u2554\u2550\u2550\u2550\u2550\u255d","\u2591\u2591\u2591\u2591\u2591\u2551\xb7\u2502\u250c\u2500\u2500\u2518\xb7\u2514\u2518\xb7\u2514\u2500\u2500\u2510\u2502\xb7\u2551\u2591\u2591\u2591\u2591\u2591","\u2591\u2591\u2591\u2591\u2591\u2551\xb7\u2502\u2502    11    \u2502\u2502\xb7\u2551\u2591\u2591\u2591\u2591\u2591","\u2591\u2591\u2591\u2591\u2591\u2551\xb7\u2502\u2502 \u2554\u2550\u2550gg\u2550\u2550\u2557 \u2502\u2502\xb7\u2551\u2591\u2591\u2591\u2591\u2591","\u2550\u2550\u2550\u2550\u2550\u255d\xb7\u2514\u2518 \u2551------\u2551 \u2514\u2518\xb7\u255a\u2550\u2550\u2550\u2550\u2550","      \xb7   \u2551223344\u2551   \xb7      ","\u2550\u2550\u2550\u2550\u2550\u2557\xb7\u250c\u2510 \u2551223344\u2551 \u250c\u2510\xb7\u2554\u2550\u2550\u2550\u2550\u2550","\u2591\u2591\u2591\u2591\u2591\u2551\xb7\u2502\u2502 \u255a\u2550\u2550\u2550\u2550\u2550\u2550\u255d \u2502\u2502\xb7\u2551\u2591\u2591\u2591\u2591\u2591","\u2591\u2591\u2591\u2591\u2591\u2551\xb7\u2502\u2502    TT    \u2502\u2502\xb7\u2551\u2591\u2591\u2591\u2591\u2591","\u2591\u2591\u2591\u2591\u2591\u2551\xb7\u2502\u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\u2502\xb7\u2551\u2591\u2591\u2591\u2591\u2591","\u2554\u2550\u2550\u2550\u2550\u255d\xb7\u2514\u2518 \u2514\u2500\u2500\u2510\u250c\u2500\u2500\u2518 \u2514\u2518\xb7\u255a\u2550\u2550\u2550\u2550\u2557","\u2551\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\u2502\u2502\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\u2551","\u2551\xb7\u250c\u2500\u2500\u2510\xb7\u250c\u2500\u2500\u2500\u2510\xb7\u2502\u2502\xb7\u250c\u2500\u2500\u2500\u2510\xb7\u250c\u2500\u2500\u2510\xb7\u2551","\u2551\u25cf\u2514\u2500\u2510\u2502\xb7\u2514\u2500\u2500\u2500\u2518\xb7\u2514\u2518\xb7\u2514\u2500\u2500\u2500\u2518\xb7\u2502\u250c\u2500\u2518\u25cf\u2551","\u2551\xb7\xb7\xb7\u2502\u2502\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7P\xb7\xb7\xb7\xb7\xb7\xb7\xb7\u2502\u2502\xb7\xb7\xb7\u2551","\u2559\u2500\u2510\xb7\u2502\u2502\xb7\u250c\u2510\xb7\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2510\xb7\u250c\u2510\xb7\u2502\u2502\xb7\u250c\u2500\u255c","\u2553\u2500\u2518\xb7\u2514\u2518\xb7\u2502\u2502\xb7\u2514\u2500\u2500\u2510\u250c\u2500\u2500\u2518\xb7\u2502\u2502\xb7\u2514\u2518\xb7\u2514\u2500\u2556","\u2551\xb7\xb7\xb7\xb7\xb7\xb7\u2502\u2502\xb7\xb7\xb7\xb7\u2502\u2502\xb7\xb7\xb7\xb7\u2502\u2502\xb7\xb7\xb7\xb7\xb7\xb7\u2551","\u2551\xb7\u250c\u2500\u2500\u2500\u2500\u2518\u2514\u2500\u2500\u2510\xb7\u2502\u2502\xb7\u250c\u2500\u2500\u2518\u2514\u2500\u2500\u2500\u2500\u2510\xb7\u2551","\u2551\xb7\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\xb7\u2514\u2518\xb7\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\xb7\u2551","\u2551\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\u2551","\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d"]},function(e,t,n){"use strict";function i(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),i(n(43)),i(n(119)),i(n(120))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(7),o=n(16),r=n(12);class s extends i.Component{shouldComponentUpdate(e,t){return e.visible!==this.props.visible}render(){return i.createElement(o.Circle,{x:this.props.center.x,y:this.props.center.y,visible:this.props.visible,fill:"darkgray",stroke:"darkgray",radius:this.props.radius})}}class a extends i.Component{render(){const e=this.props.dots.map(e=>({bounds:e.position.scale(this.props.cellSize).toRectangle(this.props.cellSize),visible:!e.collected}));return i.createElement(o.Group,null,e.map((e,t)=>i.createElement(s,{key:t,center:e.bounds.center,visible:e.visible,radius:e.bounds.dx/10})))}}a.countVisible=(e=>e.dots.reduce((e,t)=>e+(t.collected?0:1),0));t.Dots=r.connect(e=>({dots:e.round.dots,cellSize:e.game.maze.cellSize}),e=>({}))(a)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(7),o=n(16),r=n(12);t.Pellets=r.connect(e=>({pellets:e.round.pellets,cellSize:e.game.maze.cellSize}),e=>({}))((e,t)=>{const n=e.pellets.map(t=>({bounds:t.position.scale(e.cellSize).toRectangle(e.cellSize),visible:!t.collected}));return i.createElement(o.Group,null,n.map((e,t)=>i.createElement(o.Circle,{key:t,visible:e.visible,x:e.bounds.center.x,y:e.bounds.center.y,fill:"darkgray",stroke:"none",radius:e.bounds.dx/3})))})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(7),o=n(10),r=n(16),s=n(12);t.Pacman=s.connect((e,t)=>({cellSize:e.game.maze.cellSize,position:e.heat.pacman.position,direction:e.heat.pacman.direction,mouthAngle:e.heat.pacman.mouthAngle,visible:!e.heat.pacman.hidden}),e=>({}))(class extends i.Component{render(){const e=this.props,t=e.position.scale(e.cellSize).offset(e.cellSize.scale(.5)),n=(e=>{switch(e){case o.Direction.Up:return-90;case o.Direction.Down:return 90;case o.Direction.Left:return 180;case o.Direction.Right:default:return 0}})(e.direction)+e.mouthAngle/2;return i.createElement(r.Arc,{visible:e.visible,x:t.x,y:t.y,angle:-e.mouthAngle,rotation:n,innerRadius:0,outerRadius:e.cellSize.y-4,fill:"yellow"})}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(7),o=n(10),r=n(12),s=n(17),a=n(16);t.Ghost=r.connect((e,t)=>({cellSize:e.game.maze.cellSize,position:e.heat.ghosts[t.index].position,direction:e.heat.ghosts[t.index].direction,visible:e.heat.ghosts[t.index].state!==s.Store.GhostState.hidden,scared:e.heat.ghosts[t.index].state===s.Store.GhostState.scared}),e=>({}))(class extends i.Component{color(){if(this.props.scared)return"blue";switch(this.props.index){case 0:return"red";case 1:return"cyan";case 2:return"pink";case 3:return"orange";default:return"error"}return""}render(){const e=this.props,t=e.position.scale(e.cellSize).offset(e.cellSize.negate.scale(.5)),n=o.Point.vector(this.props.direction).scale(2),r=new o.Point(8,13).offset(n),s=new o.Point(20,13).offset(n),c=2*(e.cellSize.x-4)/28,l=2*(e.cellSize.y-4)/28;return i.createElement(a.Group,{visible:e.visible,x:t.x+4,y:t.y+4,scaleX:c,scaleY:l},i.createElement(a.Path,{data:"M0 28 L0 14 C0 6 6 0 14 0 C22 0 28 6 28 14 L28 28 L23.333 23.333 L18.666 28 L14 23.333 L9.333 28 L4.666 23.333 L0 28",fill:this.color(),stroke:"black",strokeWidth:1/c}),i.createElement(a.Path,{data:"M8 8 C5 8 4 11 4 13 C4 15 5 18 8 18 C11 18 12 15 12 13 C12 11 11 8 8 8 M20 8 C17 8 16 11 16 13 C16 15 17 18 20 18 C23 18 24 15 24 13 C24 11 23 8 20 8",fill:"white",stroke:"black",strokeWidth:1/c}),i.createElement(a.Circle,{radius:2,x:s.x,y:s.y,fill:"black"}),i.createElement(a.Circle,{radius:2,x:r.x,y:r.y,fill:"black"}))}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(7),o=n(16),r=n(12);t.ModalText=r.connect((e,t)=>({mazeSize:e.game.maze.gridSize.scale(e.game.maze.cellSize),textCenter:e.game.maze.textPos,cellSize:e.game.maze.cellSize,text:e.game.modalText}),e=>({}))(class extends i.Component{render(){const e=this.props.mazeSize;return i.createElement(o.Text,{x:0,y:this.props.textCenter.scale(this.props.cellSize).y,fill:"yellow",text:this.props.text||"",visible:void 0!==this.props.text,fontSize:1.5*this.props.cellSize.y,fontStyle:"bold",fontFamily:"fantasy",width:e.x,padding:0,align:"center"})}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(7),o=n(12);n(125);t.Hud=o.connect((e,t)=>({score:e.game.score,lives:e.game.lives}),e=>({}))(class extends i.Component{render(){return i.createElement("div",{className:"hud"},i.createElement("div",{className:"score"},i.createElement("span",{className:"label"},"Score"),i.createElement("span",{className:"value"},this.props.score)),i.createElement("div",{className:"lives"},i.createElement("span",{className:"label"},"Lives"),i.createElement("span",{className:"value"},this.props.lives)))}})},function(e,t,n){},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/react-packman/service-worker.js").then(e=>{e.onupdatefound=(()=>{const t=e.installing;t&&(t.onstatechange=(()=>{"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}))})}).catch(e=>{console.error("Error during service worker registration:",e)})})},t.unregister=function(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()})}},function(e,t,n){},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(131),o=n(133),r=n(135),s=n(136),a=n(137),c=n(138);t.rootReducer=((e,t)=>{const n=c.getMazeNavigator(e);let l=[];const u=i.pacmanReducer(e.heat.pacman,t,e.round.dots,e.round.pellets,n,l),d=o.ghostReducer(e.heat.ghosts,t,u,n,l),h=a.heatReducer(e.heat,t,u,d,l),p=s.roundReducer(e.round,t,h,l),y=r.gameReducer(e.game,t,l),f=t.asyncDispatch;return f&&f(l),{heat:h,game:y,round:p}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(14),o=n(10),r=n(132),s=n(46);t.pacmanReducer=function(e,t,n,a,c,l){switch(t.type){case i.ANIMATION_STEP_ACTION:e=r.PacmanAnimator.step(e,t.timestamp,t.period,c);const u=s.createCollisionDetector(),d=u.checkLoot(e.position,n);null!==d&&l.push(i.dotEatenAction(d));const h=u.checkLoot(e.position,a);return null!==h&&l.push(i.pelletEatenAction(h)),e;case i.CHANGE_DIRECTION_ACTION:if(!e.running)return e;if(t.direction===e.direction&&!0===e.running)return Object.assign({},e,{nextDirection:o.Direction.None});const p=e.position.round(1);if((p.equals(e.position)||!e.running)&&c.hasNeighbour(p,t.direction,!0)){const n=t.direction;return Object.assign({},e,{direction:n,position:p,nextDirection:o.Direction.None,running:n!=o.Direction.None})}return Object.assign({},e,{nextDirection:t.direction});case i.RELEASE_PACMAN_ACTION:return Object.assign({},e,{running:!0,chomping:!0});case i.FREEZE_ACTORS_ACTION:return Object.assign({},e,{running:!1,chomping:!1});case i.HIDE_ACTORS_ACTION:return Object.assign({},e,{hidden:!0});case i.KILL_PACMAN_ACTION:return Object.assign({},e,{dying:!0,chomping:!1});default:return e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(10),o=n(24);class r{static step(e,t,n,i){return e.chomping&&(e=r.chomp(e,t)),e.running&&(e=r.move(e,n,i)),e.dying&&(e=r.die(e,t)),e}static chomp(e,t){const n=t%200;let i=Math.round(90*Math.abs(n-100)/100);return i<=0&&(i=.1),o(e,e=>(e.mouthAngle=i,e))}static die(e,t){let n=0===e.mouthAngle?0:e.mouthAngle+4;return o(e,e=>(e.mouthAngle=n<360?n:0,e))}static move(e,t,n){const r=e.speed/1e3*t;let s=e.position.offset(i.Point.vector(e.direction).scale(r)).round(10);if(s.equals(s.round(1))&&e.nextDirection!==i.Direction.None&&n.hasNeighbour(s,e.nextDirection,!0))return e=o(e,t=>(t.direction=e.nextDirection,t.nextDirection=i.Direction.None,t.position=s,t));return((e.direction===i.Direction.Right||e.direction===i.Direction.Down)&&!n.hasNeighbour(s,e.direction,!0)||(e.direction===i.Direction.Left||e.direction===i.Direction.Up)&&!n.canEnter(s))&&(s=s.round(1),e=o(e,t=>(e.running=!1,t))),e=o(e,e=>(e.position=s,e))}}t.PacmanAnimator=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(14),o=n(17),r=n(10),s=n(46),a=n(134);class c extends a.Mutator{advance(e){const t=this.mutable.speed/1e3*e,n=r.Point.vector(this.mutable.direction).scale(t);this.mutable.position=this.mutable.position.offset(n).round(10)}startMoving(){this.mutable.state=o.Store.GhostState.running}startBouncing(){this.mutable.state=o.Store.GhostState.bouncing,this.mutable.direction=r.Direction.Down}freeze(){this.mutable.state=o.Store.GhostState.frozen}startLeaveBox(){this.mutable.state=o.Store.GhostState.leavingBox}hide(){this.mutable.state=o.Store.GhostState.hidden}startBlueMode(e){this.state.state==o.Store.GhostState.running&&(this.mutable.direction=r.revertDirection(this.mutable.direction)),this.mutable.state=o.Store.GhostState.scared}endBlueMode(){this.state.state==o.Store.GhostState.scared&&(this.mutable.state=o.Store.GhostState.running)}coerceDirection(e){this.mutable.direction=e}decideChasingDirection(e,t,n,i,o){let r=0;switch(n){case 0:r=this.blinkyDecision(e,t);break;case 1:r=this.inkyDecision(e,t,i,o);break;case 2:r=this.pinkyDecision(e,t,i);break;default:s=e.length,r=Math.floor(Math.random()*s)}var s;this.mutable.direction=e[r]}decideRunawayDirection(e,t){let n=0;if(1==e.length)n=0;else{const i=(e=e.filter(e=>e!=r.revertDirection(this.state.direction))).map(e=>this.mutable.position.offset(r.Point.vector(e)).euclidDistanceTo(t));n=i.reduce((e,t,n)=>t>i[e]?n:e,0)}this.mutable.direction=e[n]}blinkyDecision(e,t){const n=e.map(e=>this.mutable.position.offset(r.Point.vector(e)).euclidDistanceTo(t));return n.reduce((e,t,i)=>t<n[e]?i:e,0)}pinkyDecision(e,t,n){const i=e.map(e=>this.mutable.position.offset(r.Point.vector(e)).euclidDistanceTo(t.offset(r.Point.vector(n).scale(4))));return i.reduce((e,t,n)=>t<i[e]?n:e,0)}inkyDecision(e,t,n,i){const o=t.offset(r.Point.vector(n).scale(2)).offset(i.negate).scale(2).offset(i),s=e.map(e=>this.mutable.position.offset(r.Point.vector(e)).euclidDistanceTo(o));return s.reduce((e,t,n)=>t<s[e]?n:e,0)}}t.ghostReducer=function(e,t,n,a,l){let u=e.map(e=>new c(e));switch(t.type){case i.ANIMATION_STEP_ACTION:const e=s.createCollisionDetector();let c=!1;u.forEach((s,d)=>{if(s.state.state!=o.Store.GhostState.frozen&&s.state.state!=o.Store.GhostState.hidden){if(s.state.position.equals(s.state.position.round(1)))switch(s.state.state){case o.Store.GhostState.running:const e=r.allDirections.filter(e=>a.hasNeighbour(s.state.position,e,!0));1===e.length?s.state.direction!=e[0]&&s.coerceDirection(e[0]):s.decideChasingDirection(e.filter(e=>e!=r.revertDirection(s.state.direction)),n.position,d,n.direction,u[0].state.position);break;case o.Store.GhostState.bouncing:a.hasNeighbour(s.state.position,s.state.direction,!1)&&(s.state.direction!=r.Direction.Up||a.canGhostBounceUp(s.state.position))||s.coerceDirection(r.revertDirection(s.state.direction));break;case o.Store.GhostState.leavingBox:if(a.isGhostOutOfTheBox(s.state.position))l.push(i.ghostLeftBoxAction(d));else{const e=a.directionTowardsGate(s.state.position);e!=s.state.direction&&s.coerceDirection(e)}break;case o.Store.GhostState.scared:s.decideRunawayDirection(r.allDirections.filter(e=>a.hasNeighbour(s.state.position,e,!0)),n.position)}s.advance(t.period),!c&&e.checkBite(n.position,s.state.position)&&(l.push(i.ghostBittenAction(n.position,d)),c=!0)}});break;case i.RELEASE_GHOST_ACTION:u[t.index].startMoving();break;case i.BRING_GHOST_OUT_ACTION:u[t.index].startLeaveBox();break;case i.BOUNCE_GHOST_ACTION:u[t.index].startBouncing();break;case i.FREEZE_ACTORS_ACTION:u.forEach(e=>e.freeze());break;case i.HIDE_ACTORS_ACTION:u.forEach(e=>e.hide());break;case i.START_BLUE_MODE_ACTION:u.forEach(e=>e.startBlueMode(n.position));break;case i.END_BLUE_MODE_ACTION:u.forEach(e=>e.endBlueMode())}return u.map(e=>e.state)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Mutator=class{constructor(e){this._readOnly=e}get mutable(){return this._mutable||(this._mutable=Object.assign({},this._readOnly)),this._mutable}get state(){return this._mutable?this._mutable:this._readOnly}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(14),o=n(24);t.gameReducer=function(e,t,n){let r=e;switch(t.type){case i.PAUSE_COMMAND_ACTION:r=o(r,e=>(e.paused=!e.paused,e));break;case i.MODAL_TEXT_ACTION:r=o(r,e=>(e.modalText=t.text,e));break;case i.SHOW_LEVEL_ACTION:r=o(r,e=>(e.modalText=`Level ${e.level}`,e));break;case i.DOT_EATEN_ACTION:r=o(r,e=>(e.score+=10,e));break;case i.PELLET_EATEN_ACTION:r=o(r,e=>(e.score+=50,e));break;case i.GHOST_BITTEN_ACTION:r=o(r,e=>(e.lives>0&&e.lives--,e)),n.push(i.heatEndAction(!0));break;case i.INCREASE_LEVEL_ACTION:r=o(r,e=>(e.level++,e))}return r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(17),o=n(14),r=n(24);t.roundReducer=function(e,t,n,s){let a=e;const c=()=>{a.dots.every(e=>e.collected)&&a.pellets.every(e=>e.collected)&&s.push(o.heatEndAction(!1))};switch(t.type){case o.RESET_ROUND_ACTION:return i.Store.defaultApp().round;case o.DOT_EATEN_ACTION:let e=a.dots;e[t.index]=r(e[t.index],e=>(e.collected=!0,e)),a=r(a,t=>(t.dots=[...e],t)),c();break;case o.PELLET_EATEN_ACTION:let n=a.pellets;n[t.index]=r(n[t.index],e=>(e.collected=!0,e)),a=r(a,e=>(e.pellets=[...n],e)),c()}return a}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(17),o=n(14),r=n(24);t.heatReducer=function(e,t,n,s,a){let c=e;switch(c=r(c,e=>(e.ghosts=s,e.pacman=n,e)),t.type){case o.RESET_HEAT_ACTION:case o.RESET_ROUND_ACTION:return i.Store.defaultApp().heat}return c}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(139),o=n(140);t.getMazeNavigator=i.createSelector(e=>e.game.maze,e=>o.createMazeNavigator(e))},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(10);class o{constructor(e){this.neighbours=new Map,this.ghostsOnly=e}}t.createMazeNavigator=(e=>new r(e));class r{constructor(e){this.cells=new Map,e.passes.forEach(e=>this.cells.set(this.sparseHash(e.gridPos),new o(e.ghostOnly))),this.gate=e.gate,this.cells.forEach((e,t,n)=>{const o=(n,i)=>{const o=this.cells.get(t+i);o&&e.neighbours.set(n,o)};o(i.Direction.Left,-1),o(i.Direction.Right,1),o(i.Direction.Up,-r.hashFactor),o(i.Direction.Down,r.hashFactor)})}coordinateToCell(e){return Math.floor(Math.round(1e3*e)/1e3)}sparseHash(e){return this.coordinateToCell(e.y)*r.hashFactor+this.coordinateToCell(e.x)}hasNeighbour(e,t,n){const i=this.sparseHash(e),o=this.cells.get(i);if(null!=o){const e=o.neighbours.get(t);return null!=e&&(!e.ghostsOnly||!n)}return!1}canEnter(e){const t=this.sparseHash(e),n=this.cells.get(t);return null!=n&&!n.ghostsOnly}canGhostBounceUp(e){return this.coordinateToCell(e.y)>this.gate.y+1}isGhostOutOfTheBox(e){return this.coordinateToCell(e.y)<=this.gate.y}directionTowardsGate(e){const t=this.coordinateToCell(e.x);return t<=this.gate.x?i.Direction.Right:t>this.gate.x+1?i.Direction.Left:i.Direction.Up}}r.hashFactor=1e3,t.MazeNavigator=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(25),o=n(142),r=n(14);t.rootSaga=function*(){yield[i.takeEvery(r.START_APPLICATION_ACTION,o.startApplicationSaga)]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(25),o=n(47),r=n(14);function*s(){let e=yield i.call(a);for(;!e.lost;)yield i.put(r.hideActorsAction()),yield o.delay(500),yield i.put(r.resetRoundAction()),yield o.delay(500),yield i.put(r.showLevelAction()),yield o.delay(500),e=yield i.call(a)}function*a(){let e=yield i.call(d);for(;e.lost;)yield i.put(r.resetHeatAction()),e=yield i.call(d);return{lost:e.lost}}function*c(e,t){yield o.delay(t),yield i.put(r.releaseGhostAction(e))}function*l(e,t){yield i.put(r.bounceGhostAction(e)),yield o.delay(t),yield i.put(r.bringGhostOutAction(e)),yield i.take(t=>t.type==r.GHOST_LEFT_BOX_ACTION&&t.ghostIndex==e),yield i.put(r.releaseGhostAction(e))}function*u(e){yield i.put(r.startBlueModeAction()),yield i.call(o.delay,e),yield i.put(r.endBlueModeAction())}function*d(){yield i.put(r.modalTextAction("GET READY!")),yield o.delay(2e3),yield i.put(r.modalTextAction(void 0));const e=yield i.fork(c,0,0),t=yield i.fork(l,2,0),n=yield i.fork(l,1,2e3),s=yield i.fork(l,3,3e3);yield i.put(r.releasePacmanAction());let a,d=!1,h=!1;for(;!d;){const e=yield i.take([r.HEAT_END_ACTION,r.PELLET_EATEN_ACTION,r.BLUE_MODE_TIMEOVER_ACTION]);switch(e.type){case r.HEAT_END_ACTION:h=e.payload,d=!0;break;case r.PELLET_EATEN_ACTION:a=yield i.fork(u,5e3);break;case r.BLUE_MODE_TIMEOVER_ACTION:yield i.put(r.endBlueModeAction())}}return void 0!=a&&(yield i.cancel(a)),yield i.cancel(e),yield i.cancel(t),yield i.cancel(n),yield i.cancel(s),yield i.put(r.freezeActorsAction()),h?(yield i.put(r.killPacmanAction()),yield o.delay(1e3)):yield i.put(r.increaseLevelAction()),{lost:h}}t.startApplicationSaga=function*(){yield i.call(s)},t.startGameSaga=s,t.startRoundSaga=a,t.releaseGhostSaga=c,t.bounceGhostSaga=l,t.blueModeSaga=u,t.startHeatSaga=d}],[[51,2,1]]]);
//# sourceMappingURL=main.f8369a08.chunk.js.map